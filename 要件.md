# IaC導入のモチベーション

- インフラ作業の時間を短縮したい
  - 初期構築のリソース作成
  - 運用時のリソース増強や設定変更
  - 非常時のルート切り替えや再構築
- インフラ作業を安全に行いたい
  - 作業手順による複雑な操作を排除したい
  - 作業前に環境への影響を把握したい
- 同じ環境セットを何度でもすぐ追加・削除したい
  - マルチテナントなサービスで複数顧客分の環境を用意したい
  - プラットフォームサービスのように利用者自身で環境を作成・削除できるようにしたい
- 継続的に改善しながら開発を行いたい（アジャイル）
- パラメーターシートでの構成管理をやめたい
- 自動化を取り入れたい
  - ドリフト検知: 環境とコードの差分を見て意図しない変更があるか
  - テスト: 定期的なテスト実行
  - デプロイ: コードを修正したらすぐに環境へ適用
  - レビュー: 静的解析ツール、MLによるレビュー
- セキュリティポリシー、ベンチマークとの適合を知りたい
  - CISベンチマーク
  - 脆弱性検査
- その他の課題解決
  - AIをもっと活用しやすくしたい

# 対象システム・範囲

- 対象システムの概要
  - 環境数
  - 各環境の構成
- IaC適用の範囲
  - フェーズ
    - 初期構築
    - 運用保守
  - 対象
    - クラウドリソース
    - OSミドルウェア
    - コンテナ・Kubernetes
  - ツールの縛り
    - Terraform
    - Ansible
    - CloudFormation
    - その他  
- 適用方針
  - すべてIaC/限定的なIaC

# 運用要件

- 運用体制
  - チーム体制
    - クラウドチーム/OSチームなどインフラでも分かれるか。アプリ側は？
    - チームの人数
  - IaC使うメンバーの技術レベル（初めて/学習はあり/PJ経験あり/エキスパート）
    - OS
    - クラウド
    - IaC
  - 人の入れ替わり（頻繁/たまに/ほとんどない）
- 保守開発
  - インフラ変更の頻度（年/月/週/日）
  - インフラ変更の内容
    - リソース追加・削除
    - 定期メンテナンス
    - ミドルバージョンアップ
  - 作業に関わる要件
    - 作業場所の制限
      - 本番はS/R端末からのみ接続可
      - OSには踏む台サーバー経由でのみ接続可
    - 作業者の制限
      - 管理者権限の直接付与禁止
      - 作業時の再鑑が必要
    - 作業時間の制限
      - ｎ時～ｎ時のみ
      - 月末/週末のみ
    - 作業フロー
      - 内部レビュー/顧客レビュー
      - 未承認コードのデプロイ禁止
- コード管理
  - バージョン管理
    - 過去バージョンへのロールバック可否
    - 変更履歴
      - いつ
      - 誰が
      - どのような
      - なぜ
  - コード品質
    - 決まった規約があるか
    - 自動チェックの要否


# セキュリティ要件

- コード管理
  - コード置き場
    - SaaS利用の可否
    - コード置き場用のリソース作成可否
    - コード置き場へのアクセス制御
      - 社内ネットワークのみ/インターネット経由可
  - コードに対する権限
    - CRUD
    - チーム単位/個人単位
    - 読み取り専用/書き込み可
  - 暗号化
    - コード置き場との通信
    - コード置き場のディスク暗号化
    - コード内の機密情報（パスワード等）
- セキュリティポリシー適合
  - CISベンチマーク
  - 社内セキュリティポリシー
  - 脆弱性検査

# PJで考慮しておくこと

- スケジュール
  - IaCスキル習得
    - とくにIaC未経験者がいる場合は必要
    - コード開発する作業端末の設定
    - Git、VSCode、Ansible、Terraformなどのツールの使い方
  - IaC環境構築
    - コード置き場
    - CI/CD環境
    - 開発用のクラウドアカウント
  - IaC設計・コーディング・テスト期間
- コスト
  - コード置き場
  - CI/CD環境
- テスト方法
- 品質管理
